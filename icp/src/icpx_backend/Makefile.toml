[tasks.setup]
script = '''
sh -ci "$(curl -fsSL https://internetcomputer.org/install.sh)"
rustup target add wasm32-unknown-unknown
'''

[tasks.'start:local']
script = '''
dfx start --background --clean
'''

[tasks.'stop:local']
script = '''
dfx stop
'''

[tasks.deploy]
script = '''
dfx deploy
'''

[tasks."call:counter"]
script = '''
dfx canister call icpx_backend get
dfx canister call icpx_backend set 1
dfx canister call icpx_backend get
dfx canister call icpx_backend increment
dfx canister call icpx_backend get
'''

[tasks."call:pg"]
script = '''
dfx canister call icpx_backend pg
'''

[tasks."call:verify_signature"]
script = '''
dfx canister call icpx_backend verify_signature '(
  "8edf66ef7732c8e3007ff5cb236356b30f731fc9306aa30e77b6bc571327e8c8d15f57c9178fafb1d71c0cfa88884176723ea0c877d4d8d8b794a61c3986c49545d1ed7cc8e3106dac37a73fe8d9ee9b0abec22da31dccb52c227b32232a943418c1073f40e1b5ac66146931c9ff5217",
  "a6e6986b1d1df5ad6a09e4924bc457e3446c220e286bcbecc8d37e0a4cc5c4d3d229ebcb0e5530c4ffb89c36c95e93f20ddebd30582dcabe69b71185d1ed2b31be418002e8c33d1ee6afeea0ee09cf2931a58a8481bf60b2b325fa86da238a5eb3f6fb276052bea67f4df3046929333373d33d2de633401cd0a25dfe38ae30ebd699f272254e65ab1b10d1354a5c0e260000000581c3701d7a33a0a02dc8ba900b558991602a3c3a745faae8991f9d8818c8292397eed8380942636dca62a4dce4569a4b80fee889da4fdbeeb8a29901f8f437be953dd1dcc85c8be79fe98e5f8659161a3d193295dddec4c3672211c6e81365f7973ac7bcb27afe30df8248c568afd00af7a36285ecb1c49245279a97701609027c1fbf1297b51704cad8f5fcc91b9392aa07d6652065345acebb34fc77cb1dbd19989feae97e30b6f6c9c5539f312bf2071731d2bef7197497dbfe9bdece14a582062e84396e8b94d32bdc0e512f8341d2cbd9c2b4bc8d8457cecde8e006b1235b3af29308e3096282db4048f1534f26",
  vec { "message 1"; "message 2"; "message 3"; "message 4"; "message 5"; }
)'
'''

[tasks."call:verify_proof"]
script = '''
proof="000001dc86c5f9f252cfc571a0acdb7264de2d7998fc28fd15332dded4c9f4bcf5091c703dfd604178b6482160df0a3240be22a789f8c4a29a73b471a8e806aa1a69cf9097e80f25a52ab94aa33b15e2b9118bfeb6318be6a37033e1ef3c49f3cec911b1a0de7e68dd00877b231d841db7f0d659500c879d3547328e40679cc761a003304f620698647beb8a15c431f74d11925700000074921d4eb9fdde86130b1a926ef9e47641f9aa6aac79e1cfc06a2aee54c4a8d71ae3ed40324668527b9b8d197eaf0aaa7a000000026494e68b6abb654c2a5976cc4b23de585d7a8a6b96807742f1bf2a63f5f3849612562a7e27bb8bf3cd97b8931507facce0c82f0c62e2d2a524a66fd94749759dafdeb51d604a9ca9bb5a211600f565b41d5d6af6cdf204abe49de8d799e8369268482850975419d7b01b57e9ac8f5828000000050af7632d8ff68165d477f0203c99ae22990910e8474a6b9c4b0758d076501b8405ac1ad3dff5f4ca9101de758a8151639b752392be092a3e21247c280bda6cfb4865cae98e5f412e9f1bb7194c40bd195e619737b07041f047c2bbf82b2e82192437299c63e69c5bfc8920c175512ccdc522e75b3808521c9e2e097325ddafb15c4bd5c917930b428769aa4591dfe6d185ccf4ffe7f2e1d82cc3da19ef127296000000020000000123ff3f4448b0eb344e7a59d5571e17294f9fdbdd498dc92a10f8b400eb17d4210000000323171a25f25dedbd037c567e1740d8a68846ed9b5ff314f38e025e3ef43e0907"
request="000000010aa884e44928aa0873f0d4394222ad68f4f6f76f8b2945da78f43ce4fa8f46d11b6330a2579f60203817847193826163880ff17334a57cffba43f700008142b5d0415fdc1ac932a213490430766ce466997bda7e9eaed9d9b6d9a06756e7e2f3ea8f12234a92d6bf27db8f40f26a234668835e435a01eeaf3bd3e449faa9fae86a07444bc521a656214d8364d375eea091000000058f317c02ac33659377c6089db10b33bf6c91c40317887a0b371a723f7d5ae0c99c7f19339d963dbf9027a480f922e8cc84af4dd5f77ce7c7ee0775ac9a8b76608da75853249b5baad7f67094f2381abcecf256cdfde8264bbf8a00b464c271eca8e82c25206f94a10a47dd22b5599cf0bc5b07e7aa3a73803d2a7641698159bfe498b16f9d2c4c9006023a43a3febc478ecaf62eff5a1a9822b21153003cba600599e05bfe483fccb07afb9a14ae42d4395dc941c1ee3370f3c91250df895379ab25dfdc7268ca744f67ada7780132c7e07f2b1cd20504945f4b471c2fa88cc0d00817321f871c85830c1bf70b82cc82"
nonce="5db848a07a187fe53fa0444f65ecb6ad3db6f877d121e9a32af214472762de47"
challenge="231f46f6fbf7adcfe0dc12980245d513aa5a4e48a983f6afa765bdaf90021414"

dfx canister call icpx_backend verify_proof "(
  \"${proof}\",
  \"${request}\",
  \"${nonce}\",
  \"${challenge}\"
)"
'''

[tasks."call:verify_proof_old"]
script = '''
proof=000001dc842e0e7fcbc17c74d5449a5ebf384ca17875639a6844c1f6f2bdbf7ff527e4f9796bb2e7a2ee6423acccdf7532cdbdbd925c8765859d094b0168310d89cf2717fddb20822ecf2e7770038329574b656dad09159170035b741b08e5febd8d41d2a86e878c84cf39587db5e758dfc4e653f4ccde3571f3a4bd28822ebcbe3c2fadec99a0f67e22e60c6f7184214905c0d200000074a742d3640364d1f6fe57c41e14c55c204f9f6ed34b1d0c47d6a057513d309a66bc75d2f0eace1ed8f76892b2a933261d000000024890d0314c5bb249affb64413b0178e8b15db084e0f6b9b201162dc39c498535553842bf3184e3b95140c005bda2e25b93258fb5b64662b805f4acd0533fc1c984f1c437fdb23e585a364f9115b5b920a93c83a4ab71d798667e38636a03e9badd6cc47be02d12b5879675a9f46bb4040000000551025c5d76631196324d13b75e9892a557806c9b94e075e54f83228054446f40470717c6e0d5856fd3fb3144bdb017a64819ae76e84f65967c6ee61aca5b93f516ecbe2bdaa60491497ffd56700751d0982e53faaf28513643c2f64f6ed9d04e5fd0486f8973f57834f60d16da425ad725c8d15d4dea147365e0758bd94654ac267d0a139228dd2620fe5c6a54de6ae993048484565aade08bb6947a45988153000000020000000123ff3f4448b0eb344e7a59d5571e17294f9fdbdd498dc92a10f8b400eb17d4210000000323171a25f25dedbd037c567e1740d8a68846ed9b5ff314f38e025e3ef43e0907
request=000000010a84e139e38444744050c31670f9bcc5412ee4062a2aff845c9cb4735bcceec821b7c8be414263ae0167390f7a1506892a0a13fa00b0482b8e84274656ca2c716bb184cc2048c0ee6dbd99c4c5c3c0acd931e1ef6355d3f77b79334a6f41037255b6b180d9775172ab8a9fe005af6d6c7b95af3ce870edfdc4595de0d474f19d77f485b2d2b918d4f646c93f9dc36b61cb00000005a59b4b65a58ee95dfe0f8c4910fcfe6f0414aedeb0ab19c9434064f5fcdc0383ba003f76cfdbec4e2b7ba49b2835a81c8bc815bb6239d2b35db8b614892aec04974ba30f5a7f137178c229fa1d80f1c32e429886278baaff54038b499a2336e985eede01d04991f3b8e5fb4cc40f9f10e043a590b985f460cb5e7a7ac8fd4bc5e4b2e7ee07f55fdb978f28dec0e82784af44fce72ff6fa1a8eed1398bb3e24ea85b6bb20f398c10c752e1919fdb5e1c82815da4c3250fc26530b186e7ea9af45b8fa83e788772131046af0eca05ef0dfedff652d42788e65120036842d2592fb088e0d790c87efb5c0102b1a2bed7152
nonce=585b651c7874b0da48edfcc3193fc9ccb3275bd009f3858f966b03e98f003fff

dfx canister call icpx_backend verify_proof_old "(
  \"${proof}\",
  \"${request}\",
  \"${nonce}\"
)"
'''
