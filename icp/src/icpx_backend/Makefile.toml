[tasks.setup]
script = '''
sh -ci "$(curl -fsSL https://internetcomputer.org/install.sh)"
rustup target add wasm32-unknown-unknown
'''

[tasks.'start:local']
script = '''
dfx start --background --clean
'''

[tasks.'stop:local']
script = '''
dfx stop
'''

[tasks.deploy]
script = '''
dfx deploy
'''

[tasks."call:counter"]
script = '''
dfx canister call icpx_backend get
dfx canister call icpx_backend set 1
dfx canister call icpx_backend get
dfx canister call icpx_backend increment
dfx canister call icpx_backend get
'''

[tasks."call:pg"]
script = '''
dfx canister call icpx_backend pg
'''

[tasks."call:verify_signature"]
script = '''
dfx canister call icpx_backend verify_signature '(
  "8edf66ef7732c8e3007ff5cb236356b30f731fc9306aa30e77b6bc571327e8c8d15f57c9178fafb1d71c0cfa88884176723ea0c877d4d8d8b794a61c3986c49545d1ed7cc8e3106dac37a73fe8d9ee9b0abec22da31dccb52c227b32232a943418c1073f40e1b5ac66146931c9ff5217",
  "a6e6986b1d1df5ad6a09e4924bc457e3446c220e286bcbecc8d37e0a4cc5c4d3d229ebcb0e5530c4ffb89c36c95e93f20ddebd30582dcabe69b71185d1ed2b31be418002e8c33d1ee6afeea0ee09cf2931a58a8481bf60b2b325fa86da238a5eb3f6fb276052bea67f4df3046929333373d33d2de633401cd0a25dfe38ae30ebd699f272254e65ab1b10d1354a5c0e260000000581c3701d7a33a0a02dc8ba900b558991602a3c3a745faae8991f9d8818c8292397eed8380942636dca62a4dce4569a4b80fee889da4fdbeeb8a29901f8f437be953dd1dcc85c8be79fe98e5f8659161a3d193295dddec4c3672211c6e81365f7973ac7bcb27afe30df8248c568afd00af7a36285ecb1c49245279a97701609027c1fbf1297b51704cad8f5fcc91b9392aa07d6652065345acebb34fc77cb1dbd19989feae97e30b6f6c9c5539f312bf2071731d2bef7197497dbfe9bdece14a582062e84396e8b94d32bdc0e512f8341d2cbd9c2b4bc8d8457cecde8e006b1235b3af29308e3096282db4048f1534f26",
  vec { "message 1"; "message 2"; "message 3"; "message 4"; "message 5"; }
)'
'''

[tasks."call:verify_proof"]
script = '''
proof=000001dca9894858ee163cb058c2606c1210c3afeac0ec39e3646b4b7f8cc88d1bf04fe7e7c805ebd39d0b2afee9f0ae08f2bf08af5217cfcb4eb930a2005963e3fc2d8eb805956e8dd03abb72a2030ba8001a765aae252f2109982e221824429c7b4b578b7b52f0deeb1366962f3fbb00940f7d08338bbcd3258e72a5d5f316a9ec90641dfe45636989a3deaf52d69c8c3466d700000074a177ae91012f7aac07684599059daed37da8fc2b4dae7ba4efd738573df6e66b979fe25fa29fb336452d2540458ffa66000000020c00447a468819656320f68df916de88baa79d6ed126af3b9854e99693348f5761282ac5fc514a0f4b0aa2d9a04723d66a6b77dd21caac1097f78b8ff319630ba28d47b1455e03e54e6205ab39319e88c899005e987db540a24c834376e230a79285368284dcfa4bb71507cc5313f6a5000000052ed9b719b59353109f8c025b64517b1e55c01a4dcc69bab186ab4eb70a3bd42e24077479233c49821ccf254b80bb4ea0537e7bca54b4e4b8ac082d3971e060d32efd876b763d472a0b4b230b49237db9ebfa5cd5339238a2a21e6d04df17570315d031564b5ae2721ddea5fc62820d714b9ac27ea1edd85c984c37c81486bedb67ebf58844211ab1fdd70733b48f04f13c2779e0f4571dc12685395c2e494e46000000020000000123ff3f4448b0eb344e7a59d5571e17294f9fdbdd498dc92a10f8b400eb17d4210000000323171a25f25dedbd037c567e1740d8a68846ed9b5ff314f38e025e3ef43e0907
request=000000010ab41f53a1d7662ee59d206cca1b771973ab072fc8eff0594c39e86ede05d6653ec3aa16b91aaa1bfb6ede8a6f2bc08de8028032a02d8d885177f50bd5b3f1d97637721f72147005c163a53a4f1ef7ca0563f3ab3c98413dfdd92651167a7ca07cad510855d16177205280c6b7db03dfe6396274963431b7844d1fdcdd8ee9954dc948094140eeaa1eaf917fbee9efd9cc0000000597a96c678c2269bc09ea83ec5c40989773683546cb41e97886ea753a4b8d6e91c52ff9242e3be39d0a024e4419bb9ef799a8091659c37b29b9d74b02544639fbf5ee9a60e3116b49cdaa8bc3e9355ff0142ecabe1f10511b15d443ca90f976eb8b2d32a52704e365f9bdcbd9638891c5a0f63b48b1f9452370fc473521536f25159bec804db7196385b4faae76ee15dda5b94bd3693f9a861bee5af9cbfe191842cb67e7dbd52345772fe944b4f89f754835a71d0bdd5c390408795d873bd9feaf23625169fae561d152673c005fc1aa86cc428effdb1695e20678c41c18202739f1b3e959a9d5475fbe1620104b9cad
nonce=09cbc7f8ca87a9e785137333581a86148d2cd10d5742be3e293e0cb572a66694
challenge=4cfaf940548044bf2f4c8a024ad45cb04c5ea731440d67f0887a62836144c4fe

dfx canister call icpx_backend verify_proof "(
  \"${proof}\",
  \"${request}\",
  \"${nonce}\",
  \"${challenge}\"
)"
'''

[tasks."call:verify_proof_old"]
script = '''
proof=000001dc842e0e7fcbc17c74d5449a5ebf384ca17875639a6844c1f6f2bdbf7ff527e4f9796bb2e7a2ee6423acccdf7532cdbdbd925c8765859d094b0168310d89cf2717fddb20822ecf2e7770038329574b656dad09159170035b741b08e5febd8d41d2a86e878c84cf39587db5e758dfc4e653f4ccde3571f3a4bd28822ebcbe3c2fadec99a0f67e22e60c6f7184214905c0d200000074a742d3640364d1f6fe57c41e14c55c204f9f6ed34b1d0c47d6a057513d309a66bc75d2f0eace1ed8f76892b2a933261d000000024890d0314c5bb249affb64413b0178e8b15db084e0f6b9b201162dc39c498535553842bf3184e3b95140c005bda2e25b93258fb5b64662b805f4acd0533fc1c984f1c437fdb23e585a364f9115b5b920a93c83a4ab71d798667e38636a03e9badd6cc47be02d12b5879675a9f46bb4040000000551025c5d76631196324d13b75e9892a557806c9b94e075e54f83228054446f40470717c6e0d5856fd3fb3144bdb017a64819ae76e84f65967c6ee61aca5b93f516ecbe2bdaa60491497ffd56700751d0982e53faaf28513643c2f64f6ed9d04e5fd0486f8973f57834f60d16da425ad725c8d15d4dea147365e0758bd94654ac267d0a139228dd2620fe5c6a54de6ae993048484565aade08bb6947a45988153000000020000000123ff3f4448b0eb344e7a59d5571e17294f9fdbdd498dc92a10f8b400eb17d4210000000323171a25f25dedbd037c567e1740d8a68846ed9b5ff314f38e025e3ef43e0907
request=000000010a84e139e38444744050c31670f9bcc5412ee4062a2aff845c9cb4735bcceec821b7c8be414263ae0167390f7a1506892a0a13fa00b0482b8e84274656ca2c716bb184cc2048c0ee6dbd99c4c5c3c0acd931e1ef6355d3f77b79334a6f41037255b6b180d9775172ab8a9fe005af6d6c7b95af3ce870edfdc4595de0d474f19d77f485b2d2b918d4f646c93f9dc36b61cb00000005a59b4b65a58ee95dfe0f8c4910fcfe6f0414aedeb0ab19c9434064f5fcdc0383ba003f76cfdbec4e2b7ba49b2835a81c8bc815bb6239d2b35db8b614892aec04974ba30f5a7f137178c229fa1d80f1c32e429886278baaff54038b499a2336e985eede01d04991f3b8e5fb4cc40f9f10e043a590b985f460cb5e7a7ac8fd4bc5e4b2e7ee07f55fdb978f28dec0e82784af44fce72ff6fa1a8eed1398bb3e24ea85b6bb20f398c10c752e1919fdb5e1c82815da4c3250fc26530b186e7ea9af45b8fa83e788772131046af0eca05ef0dfedff652d42788e65120036842d2592fb088e0d790c87efb5c0102b1a2bed7152
nonce=585b651c7874b0da48edfcc3193fc9ccb3275bd009f3858f966b03e98f003fff

dfx canister call icpx_backend verify_proof_old "(
  \"${proof}\",
  \"${request}\",
  \"${nonce}\"
)"
'''
